#!/usr/bin/env python3
"""Run same task with 3 providers, return exact replies"""
import subprocess, sys
from concurrent.futures import ThreadPoolExecutor

prompt, skill = sys.argv[1], sys.argv[2] if len(sys.argv) > 2 else ""

def run(p):
    cmd = ["./agent", "-p", prompt, "--provider", p] + (["--skills", skill] if skill else [])
    return p, subprocess.run(cmd, capture_output=True, text=True).stdout

results = dict(ThreadPoolExecutor(3).map(run, ["claude", "openai", "gemini"]))
print(f"Claude:\n{results['claude']}\n\nOpenAI:\n{results['openai']}\n\nGemini:\n{results['gemini']}")
